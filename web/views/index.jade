extends layout

include mixins/episodeBox.jade
include mixins/channelImage.jade

block content

    script(src='https://ajax.googleapis.com/ajax/libs/angularjs/1.3.9/angular.min.js', type='text/javascript')
    script(src='/javascripts/main.js', type='text/javascript')

    ul.episodes-list(ng-app="main", ng-controller="episodeList")
        a.btn(ng-click="removeFilter()", ng-show='filtersApplied()') Remove filters
        li.episode-container(ng-repeat='episode in episodes | filter:episodesFilter')
            .channel-image(class='small', ng-show='getChannelImageURL(episode.channel)')
                img(ng-src='{{getChannelImageURL(episode.channel) || ""}}')
            h3
                a.link(href='/episode/{{episode._id}}') {{episode.title}}
            h4.channel-title
                a.channel-link(href='/channel/{{episode.channel._id}}') {{episode.channel.title}}
            a.filter-link(ng-click='setFilter(episode.channel.title, filterByChannel)') Just this channel
            p.date {{formatDate(episode.pubDate)}}
                a.filter-link(ng-click='setFilter(episode.pubDate, filterByDate)') Just this day
            a.link(href='{{episode.link}}') {{truncateLink(episode.link, 75)}}
            p.description  {{episode.description}}


